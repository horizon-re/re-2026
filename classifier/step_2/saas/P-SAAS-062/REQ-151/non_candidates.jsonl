{"doc_id": "b5029907-76a4-5928-acfc-f156a82a42fc", "req_id": "REQ-151", "sent_id": "REQ-151::s001", "order": 1, "text": "**Root Cause Analysis (RCA) â€“ Negative CPU Metric Due to Counter Reset and Rate Calculation Bug**\n\nA -17% CPU usage anomaly was observed, traced back to two compounding issues: a metric counter reset and an underlying bug in the Prometheus rate calculation.", "is_candidate": false, "signals": {"action": true, "modal": false, "system": false, "constraint": false}}
{"doc_id": "b5029907-76a4-5928-acfc-f156a82a42fc", "req_id": "REQ-151", "sent_id": "REQ-151::s002", "order": 2, "text": "When a monitored service was restarted, its CPU counter reset to zero, which is expected behavior.", "is_candidate": false, "signals": {"action": true, "modal": false, "system": false, "constraint": false}}
{"doc_id": "b5029907-76a4-5928-acfc-f156a82a42fc", "req_id": "REQ-151", "sent_id": "REQ-151::s003", "order": 3, "text": "However, the Prometheus `rate()` function used in our query did not properly account for this reset, resulting in an artificially negative delta between samples.", "is_candidate": false, "signals": {"action": true, "modal": false, "system": false, "constraint": false}}
{"doc_id": "b5029907-76a4-5928-acfc-f156a82a42fc", "req_id": "REQ-151", "sent_id": "REQ-151::s005", "order": 5, "text": "A patch has been applied to address this issue.", "is_candidate": false, "signals": {"action": true, "modal": false, "system": false, "constraint": false}}
{"doc_id": "b5029907-76a4-5928-acfc-f156a82a42fc", "req_id": "REQ-151", "sent_id": "REQ-151::s006", "order": 6, "text": "First, we added a `clamp_min(0, rate(...))`", "is_candidate": false, "signals": {"action": true, "modal": false, "system": false, "constraint": false}}
{"doc_id": "b5029907-76a4-5928-acfc-f156a82a42fc", "req_id": "REQ-151", "sent_id": "REQ-151::s007", "order": 7, "text": "operation in the PromQL expression to ensure that all computed rates are bounded at a minimum of zero.", "is_candidate": false, "signals": {"action": false, "modal": false, "system": false, "constraint": false}}
{"doc_id": "b5029907-76a4-5928-acfc-f156a82a42fc", "req_id": "REQ-151", "sent_id": "REQ-151::s008", "order": 8, "text": "This change prevents negative values from being returned regardless of counter behavior.", "is_candidate": false, "signals": {"action": true, "modal": false, "system": false, "constraint": false}}
{"doc_id": "b5029907-76a4-5928-acfc-f156a82a42fc", "req_id": "REQ-151", "sent_id": "REQ-151::s009", "order": 9, "text": "Additionally, a safeguard was added in the exporter logic to clamp any preprocessed CPU rates to zero if a reset is detected.", "is_candidate": false, "signals": {"action": true, "modal": false, "system": false, "constraint": false}}
{"doc_id": "b5029907-76a4-5928-acfc-f156a82a42fc", "req_id": "REQ-151", "sent_id": "REQ-151::s010", "order": 10, "text": "To prevent recurrence, a dashboard alert was introduced to monitor for any negative values in critical metrics.", "is_candidate": false, "signals": {"action": true, "modal": false, "system": false, "constraint": false}}
{"doc_id": "b5029907-76a4-5928-acfc-f156a82a42fc", "req_id": "REQ-151", "sent_id": "REQ-151::s011", "order": 11, "text": "This allows for early detection of similar anomalies and ensures timely remediation before impacting downstream systems.", "is_candidate": false, "signals": {"action": true, "modal": false, "system": false, "constraint": false}}
